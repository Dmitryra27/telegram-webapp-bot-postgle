<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ü–æ–¥–ø–∏—Å–∫–∞</title>
    <link rel="stylesheet" href="./static/style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<h1>üí≥ –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ AI-—á–∞—Ç</h1>

<p><strong>–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —ç—Ç–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞.</strong></p>
<p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram</p>

<div class="payment-options">
    <!--button onclick="payStars()">–û–ø–ª–∞—Ç–∏—Ç—å –∑–≤—ë–∑–¥–∞–º–∏ üåü</button-->
    <button onclick="openPayment()">–û–ø–ª–∞—Ç–∏—Ç—å —á–µ—Ä–µ–∑ Yandex –ö–∞—Å—Å–∞</button>
</div>

<p id="status" style="color: red;"></p>

<script src="https://telegram.org/js/telegram-web-app.js "></script>
<script>
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–æ—Å—Ç—É–ø–Ω—ã –ª–∏ –∑–≤—ë–∑–¥—ã —É –±–æ—Ç–∞
    function payStars() {
        if (Telegram.WebApp && Telegram.WebApp.send_stars_transaction) {
            const user_id = Telegram.WebApp.initDataUnsafe.user.id;
            fetch(`/api/subscribe?user_id=${user_id}`, { method: 'POST' })
                .then(res => res.text())
                .then(text => {
                    alert("–°–ø–∞—Å–∏–±–æ –∑–∞ –æ–ø–ª–∞—Ç—É !");
                    window.location.href = "/";
                })
                .catch(err => {
                    document.getElementById('status').innerText = "–û—à–∏–±–∫–∞ –æ–ø–ª–∞—Ç—ã";
                });
        } else {
            document.getElementById('status').innerText = "–û–ø–ª–∞—Ç–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞.";
        }
    }

    function openPayment() {
        window.location.href = "/payment/yandex-checkout";
    }
</script>
</body>
</html>

