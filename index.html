<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>AI Chat</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="favicon.ico" />
</head>
<body>
<h1>üí¨ AI Chat - @AI_DB_PaymentBott</h1>
<textarea id="prompt" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –∑–∞–ø—Ä–æ—Å..."></textarea><br>
<button onclick="send()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
<p id="response"></p>

<script src="https://telegram.org/js/telegram-web-app.js "></script>
<script>
    async function send() {
        const prompt = document.getElementById('prompt').value;
        const userId = Telegram.WebApp.initDataUnsafe.user.id;

        const res = await fetch(`/api/generate?prompt=${encodeURIComponent(prompt)}&user_id=${userId}`);
        if (res.status === 402) {
            alert("–ü–æ–¥–ø–∏—Å–∫–∞ –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å");
            window.location.href = "/subscribe";
        } else {
            document.getElementById('response').innerHTML = await res.text();
        }
    }
</script>
</body>
</html>
